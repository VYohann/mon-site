<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Solveur Morpion</title>
  <style>
    body { font-family: Arial; display: flex; flex-direction: column; align-items: center; margin-top: 30px; }
    table { border-collapse: collapse; }
    td {
      width: 60px; height: 60px; text-align: center; vertical-align: middle;
      border: 2px solid black; font-size: 40px; cursor: pointer;
    }
    #controls { margin-top: 15px; }
    #message { margin-top: 20px; font-size: 18px; }
    button { font-size: 16px; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>

<h2>Solveur Morpion – Objectif : Match nul</h2>
<table id="board"></table>

<div id="controls">
  <button onclick="nextTurn()">Passer le tour</button>
</div>
<div id="message"></div>

<script>
  const board = Array(3).fill().map(() => Array(3).fill(""));
  const playerBlock = "✶";
  let currentSymbol = "O"; // Le jeu commence avec "O"
  const table = document.getElementById("board");
  const message = document.getElementById("message");

  // Créer la grille
  for (let i = 0; i < 3; i++) {
    const row = table.insertRow();
    for (let j = 0; j < 3; j++) {
      const cell = row.insertCell();
      cell.addEventListener("click", () => handleClick(i, j, cell));
    }
  }

  function handleClick(i, j, cell) {
    if (board[i][j] === playerBlock) {
      board[i][j] = "";
      cell.textContent = "";
    } else if (board[i][j] === "") {
      board[i][j] = playerBlock;
      cell.textContent = playerBlock;
    }
  }

  function nextTurn() {
    if (isGameOver()) return;

    let played = false;
    for (let i = 0; i < 3 && !played; i++) {
      for (let j = 0; j < 3 && !played; j++) {
        if (board[i][j] === "") {
          board[i][j] = currentSymbol;
          table.rows[i].cells[j].textContent = currentSymbol;
          played = true;
        }
      }
    }

    if (!played) {
      message.textContent = "Plus aucune case disponible !";
      return;
    }

    if (isGameOver()) return;

    currentSymbol = currentSymbol === "O" ? "X" : "O"; // Alterner le symbole
  }

  function isGameOver() {
    const winner = checkWin();
    if (winner) {
      message.textContent = `Fin du jeu : ${winner === "Draw" ? "Match nul" : `${winner} a gagné !`}`;
      return true;
    }
    return false;
  }

  function checkWin() {
    const lines = [
      ...board, // lignes
      ...[0,1,2].map(j => board.map(row => row[j])), // colonnes
      [ [0,0],[1,1],[2,2] ].map(([i,j]) => board[i][j]), // diagonale \
      [ [0,2],[1,1],[2,0] ].map(([i,j]) => board[i][j])  // diagonale /
    ];

    for (let line of lines) {
      if (line.every(v => v === "O")) return "O";
      if (line.every(v => v === "X")) return "X";
    }

    if (board.flat().every(cell => cell !== "" && cell !== playerBlock)) return "Draw";

    return null;
  }
</script>

</body>
</html>